<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Press & Profit: Calibrator</title>
  <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #111;
      font-family: monospace;
      color: white;
      overflow: hidden;
      height: 100vh;
      width: 100vw;
    }
    
    #root { width: 100%; height: 100%; }

    /* The Main Layout */
    .app-container {
      display: flex;
      width: 100%;
      height: 100%;
    }

    /* Sidebar */
    .sidebar {
      width: 250px;
      background: #222;
      border-right: 1px solid #555;
      display: flex;
      flex-direction: column;
      z-index: 20;
    }
    .sidebar h2 { padding: 10px; margin: 0; font-size: 1.2rem; background: #333; }
    .job-list { padding: 10px; overflow-y: auto; flex-grow: 1; }
    .job-card { 
      padding: 10px; border: 1px solid #444; margin-bottom: 8px; cursor: pointer; 
      transition: background 0.2s;
    }
    .job-card:hover { background: #333; }
    .job-card.active { background: #004400; border-color: #00ff00; }

    /* The Workspace Image Area */
    .workspace {
      flex-grow: 1;
      position: relative;
      background-color: #333; /* Fallback if image fails */
      background-size: 100% 100%;
      background-repeat: no-repeat;
    }

    /* THE ZONES (The invisible containers) */
    .zone {
      position: absolute;
      display: flex;
      justify-content: center;
      align-items: center;
      /* Default transparent, but visible in tuning mode */
    }
    
    /* Tuning Mode Styles */
    .tuning-active .zone {
      border: 2px dashed #00ff00;
      background: rgba(0, 255, 0, 0.1);
    }
    .tuning-active .zone::after {
      content: attr(data-label);
      position: absolute;
      top: -20px;
      left: 0;
      background: #00ff00;
      color: black;
      font-size: 10px;
      padding: 2px 4px;
    }
    
    /* UI Elements inside Zones */
    .scroll-text {
      color: #000; 
      font-family: serif; 
      font-size: 1.2rem; 
      text-align: center;
      font-weight: bold;
      text-shadow: 0 0 5px white; /* Glow to ensure visibility */
    }
    
    .type-block {
      width: 50px; height: 50px;
      background: #5d4037;
      color: white;
      border: 2px solid #222;
      display: flex; justify-content: center; align-items: center;
      font-size: 20px;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.5);
      cursor: pointer;
    }

    .drawer-grid {
      display: flex; gap: 10px;
    }

    /* Calibrator Panel */
    .calibrator {
      position: fixed;
      top: 10px;
      right: 10px;
      width: 250px;
      background: rgba(0,0,0,0.8);
      border: 1px solid #00ff00;
      padding: 15px;
      z-index: 1000;
      font-size: 0.8rem;
    }
    .calibrator label { display: block; margin-top: 10px; color: #00ff00; }
    .calibrator input[type=range] { width: 100%; }
    .calibrator .val { float: right; color: white; }
    
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    
    // DEFAULT CONFIGURATION (Start points)
    const DEFAULT_LAYOUT = {
      scroll: { top: 15, left: 10, width: 40, height: 25 },
      desk:   { top: 50, left: 10, width: 60, height: 30 },
      drawer: { top: 82, left: 2,  width: 65, height: 15 },
      shelf:  { top: 5,  left: 70, width: 28, height: 90 }
    };

    function App() {
      // Toggle for Debug Mode
      const [tuningMode, setTuningMode] = React.useState(true); // Default ON so you can see it immediately
      const [currentImage, setCurrentImage] = React.useState('bg_china.png');
      
      // Layout State (The positions of the boxes)
      const [layout, setLayout] = React.useState(DEFAULT_LAYOUT);
      const [selectedZone, setSelectedZone] = React.useState('scroll');

      // Game State
      const [bed, setBed] = React.useState([]);

      // --- Tuning Helper Functions ---
      const updateLayout = (key, value) => {
        setLayout(prev => ({
          ...prev,
          [selectedZone]: { ...prev[selectedZone], [key]: parseFloat(value) }
        }));
      };

      const Zone = ({ name, children }) => {
        const style = {
          top: `${layout[name].top}%`,
          left: `${layout[name].left}%`,
          width: `${layout[name].width}%`,
          height: `${layout[name].height}%`,
        };
        return (
          <div className="zone" style={style} data-label={name.toUpperCase()} onClick={() => setSelectedZone(name)}>
            {children}
          </div>
        );
      };

      return (
        <div className={`app-container ${tuningMode ? 'tuning-active' : ''}`}>
          
          {/* SIDEBAR */}
          <div className="sidebar">
            <h2>Work Orders</h2>
            <div className="job-list">
              <div className="job-card active">Sample Job</div>
              <div className="job-card">Another Job</div>
            </div>
            <div style={{padding:'10px', borderTop:'1px solid #444'}}>
              <button onClick={() => setCurrentImage('bg_china.png')}>China Img</button>
              <button onClick={() => setCurrentImage('bg_germany.png')}>Germany Img</button>
            </div>
          </div>

          {/* WORKSPACE */}
          <div className="workspace" style={{backgroundImage: `url('${currentImage}')`}}>
            
            {/* 1. SCROLL ZONE */}
            <Zone name="scroll">
              <div className="scroll-text">
                Mission Objective<br/>
                "Print 50 Copies"
              </div>
            </Zone>

            {/* 2. DESK ZONE */}
            <Zone name="desk">
               {/* Example Blocks placed on desk */}
               <div style={{display:'flex', gap:'5px', padding:'10px', border:'2px solid rgba(0,0,0,0.2)'}}>
                 <div className="type-block">A</div>
                 <div className="type-block">B</div>
                 <div className="type-block">C</div>
               </div>
            </Zone>

            {/* 3. DRAWER ZONE */}
            <Zone name="drawer">
               <div className="drawer-grid">
                  <div className="type-block">A</div>
                  <div className="type-block">B</div>
                  <div className="type-block">C</div>
                  <div className="type-block">D</div>
               </div>
            </Zone>

             {/* 4. SHELF ZONE */}
             <Zone name="shelf">
               <div style={{display:'flex', flexDirection:'column', gap:'10px'}}>
                  <div style={{background:'#5d4037', padding:'5px', color:'white'}}>Book 1</div>
                  <div style={{background:'#5d4037', padding:'5px', color:'white'}}>Book 2</div>
               </div>
            </Zone>

          </div>

          {/* --- CALIBRATOR PANEL (Floating) --- */}
          <div className="calibrator">
            <h3 style={{marginTop:0, borderBottom:'1px solid lime'}}>ðŸ”§ TUNING MODE</h3>
            <label>
              <input type="checkbox" checked={tuningMode} onChange={e => setTuningMode(e.target.checked)} />
              Show Grid / Edit
            </label>
            
            {tuningMode && (
              <>
                <div style={{margin:'10px 0', padding:'5px', background:'#333'}}>
                  Edit Zone: 
                  <select value={selectedZone} onChange={e => setSelectedZone(e.target.value)} style={{marginLeft:'5px'}}>
                    <option value="scroll">Scroll (Top Left)</option>
                    <option value="desk">Desk (Center)</option>
                    <option value="drawer">Drawers (Bottom)</option>
                    <option value="shelf">Shelf (Right)</option>
                  </select>
                </div>

                <label>Top % <span className="val">{layout[selectedZone].top}</span></label>
                <input type="range" min="0" max="100" step="0.5" 
                       value={layout[selectedZone].top} 
                       onChange={e => updateLayout('top', e.target.value)} />

                <label>Left % <span className="val">{layout[selectedZone].left}</span></label>
                <input type="range" min="0" max="100" step="0.5" 
                       value={layout[selectedZone].left} 
                       onChange={e => updateLayout('left', e.target.value)} />

                <label>Width % <span className="val">{layout[selectedZone].width}</span></label>
                <input type="range" min="5" max="100" step="0.5" 
                       value={layout[selectedZone].width} 
                       onChange={e => updateLayout('width', e.target.value)} />

                <label>Height % <span className="val">{layout[selectedZone].height}</span></label>
                <input type="range" min="5" max="100" step="0.5" 
                       value={layout[selectedZone].height} 
                       onChange={e => updateLayout('height', e.target.value)} />

                <div style={{marginTop:'15px', fontSize:'0.7rem', color:'#aaa'}}>
                  * Adjust sliders until the green box matches your image artwork.
                </div>
              </>
            )}
          </div>

        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
